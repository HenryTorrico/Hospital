<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/">
<head>
    <meta charset="UTF-8">
    <title>Lista Consultas</title>
    <link href="css/homeStyle.css" rel="stylesheet">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<script>
    function sortTable() {
        var table, rows, switching, i, x, y, shouldSwitch;
        table = document.getElementById("my-table");
        switching = true;
        /* Make a loop that will continue until
        no switching has been done: */
        while (switching) {
            // Start by saying: no switching is done:
            switching = false;
            rows = table.rows;
            /* Loop through all table rows (except the
            first, which contains table headers): */
            for (i = 1; i < (rows.length - 1); i++) {
                // Start by saying there should be no switching:
                shouldSwitch = false;
                /* Get the two elements you want to compare,
                one from current row and one from the next: */
                x = rows[i].getElementsByTagName("TD")[0];
                y = rows[i + 1].getElementsByTagName("TD")[0];
                // Check if the two rows should switch place:
                if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                    // If so, mark as a switch and break the loop:
                    shouldSwitch = true;
                    break;
                }
            }
            if (shouldSwitch) {
                /* If a switch has been marked, make the switch
                and mark that a switch has been done: */
                rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                switching = true;
            }
        }
    }
</script>
<body >

<div>
    <nav>
        <div class="nav-wrapper black">
            <a href="#" class="brand-logo white-text">SRM</a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a href="/login">Log in</a></li>
                <li><a href="/user/new">Sign in</a></li>
            </ul>
        </div>
    </nav>
</div>
<h1 class="title">LISTA DE USUARIOS</h1>

<div>
    <p><button onclick="sortTable()">Ordenar por fecha</button></p>
</div>

<div class="w3-container w3-teal">
<table id="my-table" border="1">
    <tr>
        <th>Tipo</th>
        <th>Fecha</th>
        <th>Usuario</th>
        <th>Doctor</th>
        <th>Descripcion</th>

    </tr>
    <tr th:each="consulta: ${consultas}">

        <td th:text="${consulta.tipo}">
        </td>
        <td th:text="${consulta.fecha}">
        </td>
        <td th:text="${consulta.user.name}">
        </td>
        <td th:text="${consulta.doctor.nombreDoc}">
        </td>
        <td th:text="${consulta.descripcion}">
        </td>

        <td>
            <a class="waves-effect waves-light btn-small blue" th:href="${ '/consulta/' + consulta.id}">Ver</a>
            <a class="waves-effect waves-light btn-small blue" th:href="${ '/consulta/edit/' + consulta.id}">Editar</a>
            <a class="waves-effect waves-light btn-small blue" th:href="${ '/consulta/delete/' + consulta.id}">Borrar</a>
        </td>
    </tr>
</table>
</div>
<h1><a class="waves-effect waves-light btn-small blue" href="/consulta/new">Nueva Consulta</a></h1>

</body>
</html>